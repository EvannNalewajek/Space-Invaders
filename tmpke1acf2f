# -*- coding: utf-8 -*-
"""
Created on Sun Jan  2 17:03:43 2022

@author: evann
"""

from tkinter import Tk, Label, Button, Canvas, PhotoImage

#Création de la fenêtre graphique
Mafenetre=Tk()
Mafenetre.title('Space Invaders')

#Création du widget bouton "Lancement d'une partie"
buttonStart = Button (Mafenetre, text="START", fg = "blue")
buttonStart.pack()

#Création du widget bouton quitter
buttonQuitt = Button (Mafenetre, text="QUITTER", fg = 'red', command = Mafenetre.destroy)
buttonQuitt.pack()

#Canevas
hauteur=480
largeur=640
canevas = Canvas(Mafenetre, width = largeur, height = hauteur, bg = 'black')
canevas.pack(padx = 5, pady = 5)
canevas.focus_set()

#Affichage du score
score=Label(Mafenetre,text='Score: 0')
score.pack()

#Affichage de la vie
NbVies=Label(Mafenetre,text="Vies: 3")
score.pack()

#Importation des images
ImageVaisseau=PhotoImage(file='spaceship.gif')
ImageDestroy=PhotoImage(file='spaceshipdestroy.gif')
ImageAlien=PhotoImage(file='invader.gif')
ImageFond=PhotoImage(file='space.gif')



#Création du vaisseau
largeur_vaisseau=30
hauteur_vaisseau=32
posX=largeur/2
posY=hauteur-hauteur_vaisseau-5

#Création des aliens
largeur_alien=22      
hauteur_alien=16
ecart_alien=10
hauteur_alien_ligne1=50
# nbre_alien_par_ligne=15
# descente_alien=10
VitesseDeplacement=10
VitesseAlien=0.5
# AccelerationAlien=0.05

#Création des classes
class Spaceship:
    
    def __init__(self):
        self.x=posX
        self.y=posY
        self.apparence=canevas.create_image(self.x,self.y,image=ImageVaisseau)


    def deplacement(self,dir):
        if self.x>=largeur_vaisseau and dir==-1:
            self.x+=VitesseDeplacement*dir
        elif self.x<=largeur-largeur_vaisseau and dir==1:
            self.x+=VitesseDeplacement*dir
        self.Affichage()
        
    def Affichage(self):
        canevas.coords(self.apparence,self.x,self.y)
        
        
    # def ViePerdue(self):
    #     canevas.itemconfig(self.apparence,image=ImageDestroy)
    #     mw.after(500,self.RetourApparenceNormale)
        
    # def RetourApparenceNormale(self):
    #     canevas.itemconfig(self.apparence,image=ImageVaisseau)
    

class Alien:
    
    Compteur=0
    def __init__(self):
        Alien.Compteur += 1
        self.Compteur=Alien.Compteur
        self.vivant=True
        self.x=self.Compteur*(ecart_alien+largeur_alien)
        Alien.y=hauteur_alien_ligne1
        Alien.dir=1
        Alien.vitesse=VitesseAlien
    
    def Creation(self):
        self.apparence=canevas.create_image(self.x,self.y,image=ImageAlien)

    def Affichage(self):
        canevas.coords(self.apparence,self.x,self.y)


#Mouvement du vaisseau
def Clavier(event):
    # global TempsTir
    touche=event.keysym
    if touche=='Left':
        Spaceship.deplacement(-1)
    elif touche=='Right':
        Spaceship.deplacement(1)
    # elif touche=='space':
    #     TempsTir1=time()
    #     if TempsTir1-TempsTir>=TempsEntreTirs or Tirs==[]:
    #         TempsTir=TempsTir1
    #         tir=Tir()
    #         Tirs.append(tir)
    #         Tirs[Tir.Compteur-1].Deplacement()
    
canevas.bind('<Key>',Clavier)
            

#Lancement du gestionnaire d'événements
Mafenetre.mainloop()